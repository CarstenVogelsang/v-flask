{#
    Admin Tile Macros for Dashboard/Overview Pages

    Usage:
        from "v_flask/macros/admin_tile.html" import admin_tile, admin_tile_grid

        call admin_tile_grid():
            admin_tile('Benutzer', 'Benutzerverwaltung', 'ti-users',
                       url_for('admin.benutzer'), color_hex='#3b82f6')
            admin_tile('Einstellungen', 'Systemkonfiguration', 'ti-settings',
                       url_for('admin.settings'), color_hex='#10b981',
                       settings_url=url_for('admin.config'))

    Parameters admin_tile():
        - name: Tile title
        - description: Description text
        - icon: Tabler Icon (with ti- prefix)
        - url: Target URL on click
        - color_hex: Accent color (default: primary color)
        - settings_url: Optional - shows settings button in footer
        - badge: Optional - shows badge with count
#}

{% macro admin_tile(name, description, icon, url, color_hex='#3b82f6', settings_url=None, badge=None) %}
<div class="col">
    <div class="card h-100 admin-tile">
        <a href="{{ url }}" class="card-body text-decoration-none d-block">
            <div class="d-flex align-items-center mb-3">
                <div class="rounded-circle p-3 me-3" style="background-color: {{ color_hex }}20;">
                    <i class="ti {{ icon }} fs-2" style="color: {{ color_hex }};"></i>
                </div>
                <div class="flex-grow-1">
                    <h5 class="card-title mb-0 text-dark d-flex align-items-center">
                        {{ name }}
                        {% if badge is not none %}
                        <span class="badge rounded-pill ms-2" style="background-color: {{ color_hex }};">{{ badge }}</span>
                        {% endif %}
                    </h5>
                </div>
            </div>
            <p class="card-text text-muted small mb-0">{{ description }}</p>
        </a>
        {% if settings_url %}
        <div class="card-footer bg-transparent border-0 pt-0">
            <a href="{{ settings_url }}" class="btn btn-sm btn-outline-secondary w-100">
                <i class="ti ti-settings me-1"></i> Einstellungen
            </a>
        </div>
        {% endif %}
    </div>
</div>
{% endmacro %}


{% macro admin_tile_grid(cols_sm=1, cols_md=2, cols_lg=3, cols_xl=4) %}
<div class="row row-cols-{{ cols_sm }} row-cols-md-{{ cols_md }} row-cols-lg-{{ cols_lg }} row-cols-xl-{{ cols_xl }} g-4">
    {{ caller() }}
</div>
{% endmacro %}
