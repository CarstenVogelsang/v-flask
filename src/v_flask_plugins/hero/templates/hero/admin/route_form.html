{% extends "admin/base.html" %}

{% block title %}Route bearbeiten{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs text-sm">
    <ul>
        <li><a href="{{ url_for('admin.dashboard') }}"><i class="ti ti-home"></i> Admin</a></li>
        <li><i class="ti ti-file-text mr-1"></i>Inhalte</li>
        <li><a href="{{ url_for('hero_admin.list_sections') }}">Hero Sections</a></li>
        <li><a href="{{ url_for('hero_admin.list_routes') }}">Seiten</a></li>
        <li>{{ route.endpoint }}</li>
    </ul>
</div>
{% endblock %}

{% block admin_content %}
{# Title Bar #}
<div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold flex items-center gap-2">
        <i class="ti ti-route text-primary"></i>
        <span>Route bearbeiten</span>
    </h1>
    <a href="{{ url_for('hero_admin.list_routes') }}" class="btn btn-ghost btn-sm">
        <i class="ti ti-arrow-left mr-1"></i> Zurück
    </a>
</div>

<div class="max-w-2xl">
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <form method="post" action="{{ url_for('hero_admin.edit_route', route_id=route.id) }}">
                {% include 'v_flask/includes/_csrf.html' %}

                {# Read-only Info #}
                <div class="bg-base-200 rounded-lg p-4 mb-6">
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <span class="text-base-content/60">Endpoint:</span>
                            <span class="font-mono ml-2">{{ route.endpoint }}</span>
                        </div>
                        <div>
                            <span class="text-base-content/60">URL-Pattern:</span>
                            <span class="font-mono ml-2">{{ route.rule }}</span>
                        </div>
                        <div>
                            <span class="text-base-content/60">Blueprint:</span>
                            <span class="ml-2">{{ route.blueprint or '(keiner)' }}</span>
                        </div>
                        <div>
                            <span class="text-base-content/60">Typ:</span>
                            <span class="ml-2">{{ route.route_type }}</span>
                        </div>
                    </div>
                </div>

                {# Editable Fields #}
                <div class="form-control mb-4">
                    <label class="label">
                        <span class="label-text">Anzeigename</span>
                    </label>
                    <input type="text" name="display_name"
                           value="{{ route.display_name or '' }}"
                           class="input input-bordered"
                           placeholder="z.B. Startseite, Kontakt, Bundesland-Übersicht">
                    <label class="label">
                        <span class="label-text-alt">Leer lassen für automatischen Namen ({{ route.endpoint }})</span>
                    </label>
                </div>

                <div class="form-control mb-6">
                    <label class="label cursor-pointer justify-start gap-2">
                        <input type="checkbox" name="hero_assignable" value="1"
                               class="checkbox checkbox-primary"
                               {% if route.hero_assignable %}checked{% endif %}>
                        <span class="label-text">Hero Section zuweisbar</span>
                    </label>
                    <label class="label">
                        <span class="label-text-alt">Deaktivieren für Admin- oder API-Seiten ohne Hero-Unterstützung</span>
                    </label>
                </div>

                <div class="flex justify-end gap-2">
                    <a href="{{ url_for('hero_admin.list_routes') }}" class="btn btn-ghost">
                        Abbrechen
                    </a>
                    <button type="submit" class="btn btn-primary">
                        <i class="ti ti-device-floppy mr-1"></i> Speichern
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
